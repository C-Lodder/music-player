var ft=Object.create;var le=Object.defineProperty;var ct=Object.getOwnPropertyDescriptor;var ut=Object.getOwnPropertyNames;var ht=Object.getPrototypeOf,dt=Object.prototype.hasOwnProperty;var T=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var gt=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of ut(t))!dt.call(e,n)&&n!==r&&le(e,n,{get:()=>t[n],enumerable:!(i=ct(t,n))||i.enumerable});return e};var fe=(e,t,r)=>(r=e!=null?ft(ht(e)):{},gt(t||!e||!e.__esModule?le(r,"default",{value:e,enumerable:!0}):r,e));var q=T(L=>{"use strict";var pe=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Pt=pe+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Ne="["+pe+"]["+Pt+"]*",Ot=new RegExp("^"+Ne+"$"),Ct=function(e,t){let r=[],i=t.exec(e);for(;i;){let n=[];n.startIndex=t.lastIndex-i[0].length;let s=i.length;for(let l=0;l<s;l++)n.push(i[l]);r.push(n),i=t.exec(e)}return r},vt=function(e){let t=Ot.exec(e);return!(t===null||typeof t>"u")};L.isExist=function(e){return typeof e<"u"};L.isEmptyObject=function(e){return Object.keys(e).length===0};L.merge=function(e,t,r){if(t){let i=Object.keys(t),n=i.length;for(let s=0;s<n;s++)r==="strict"?e[i[s]]=[t[i[s]]]:e[i[s]]=t[i[s]]}};L.getValue=function(e){return L.isExist(e)?e:""};L.isName=vt;L.getAllMatches=Ct;L.nameRegexp=Ne});var J=T(Te=>{"use strict";var z=q(),Ft={allowBooleanAttributes:!1,unpairedTags:[]};Te.validate=function(e,t){t=Object.assign({},Ft,t);let r=[],i=!1,n=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=we(e,s),s.err)return s}else if(e[s]==="<"){let l=s;if(s++,e[s]==="!"){s=be(e,s);continue}else{let a=!1;e[s]==="/"&&(a=!0,s++);let o="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)o+=e[s];if(o=o.trim(),o[o.length-1]==="/"&&(o=o.substring(0,o.length-1),s--),!Rt(o)){let f;return o.trim().length===0?f="Invalid space after '<'.":f="Tag '"+o+"' is an invalid name.",E("InvalidTag",f,b(e,s))}let u=St(e,s);if(u===!1)return E("InvalidAttr","Attributes for '"+o+"' have open quote.",b(e,s));let c=u.value;if(s=u.index,c[c.length-1]==="/"){let f=s-c.length;c=c.substring(0,c.length-1);let p=ye(c,t);if(p===!0)i=!0;else return E(p.err.code,p.err.msg,b(e,f+p.err.line))}else if(a)if(u.tagClosed){if(c.trim().length>0)return E("InvalidTag","Closing tag '"+o+"' can't have attributes or invalid starting.",b(e,l));if(r.length===0)return E("InvalidTag","Closing tag '"+o+"' has not been opened.",b(e,l));{let f=r.pop();if(o!==f.tagName){let p=b(e,f.tagStartPos);return E("InvalidTag","Expected closing tag '"+f.tagName+"' (opened in line "+p.line+", col "+p.col+") instead of closing tag '"+o+"'.",b(e,l))}r.length==0&&(n=!0)}}else return E("InvalidTag","Closing tag '"+o+"' doesn't have proper closing.",b(e,s));else{let f=ye(c,t);if(f!==!0)return E(f.err.code,f.err.msg,b(e,s-c.length+f.err.line));if(n===!0)return E("InvalidXml","Multiple possible root nodes found.",b(e,s));t.unpairedTags.indexOf(o)!==-1||r.push({tagName:o,tagStartPos:l}),i=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=be(e,s);continue}else if(e[s+1]==="?"){if(s=we(e,++s),s.err)return s}else break;else if(e[s]==="&"){let f=kt(e,s);if(f==-1)return E("InvalidChar","char '&' is not expected.",b(e,s));s=f}else if(n===!0&&!Ee(e[s]))return E("InvalidXml","Extra text at the end",b(e,s));e[s]==="<"&&s--}}else{if(Ee(e[s]))continue;return E("InvalidChar","char '"+e[s]+"' is not expected.",b(e,s))}if(i){if(r.length==1)return E("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",b(e,r[0].tagStartPos));if(r.length>0)return E("InvalidXml","Invalid '"+JSON.stringify(r.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return E("InvalidXml","Start tag expected.",1);return!0};function Ee(e){return e===" "||e==="	"||e===`
`||e==="\r"}function we(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let i=e.substr(r,t-r);if(t>5&&i==="xml")return E("InvalidXml","XML declaration allowed only at the start of the document.",b(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function be(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var _t='"',Lt="'";function St(e,t){let r="",i="",n=!1;for(;t<e.length;t++){if(e[t]===_t||e[t]===Lt)i===""?i=e[t]:i!==e[t]||(i="");else if(e[t]===">"&&i===""){n=!0;break}r+=e[t]}return i!==""?!1:{value:r,index:t,tagClosed:n}}var Vt=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function ye(e,t){let r=z.getAllMatches(e,Vt),i={};for(let n=0;n<r.length;n++){if(r[n][1].length===0)return E("InvalidAttr","Attribute '"+r[n][2]+"' has no space in starting.",M(r[n]));if(r[n][3]!==void 0&&r[n][4]===void 0)return E("InvalidAttr","Attribute '"+r[n][2]+"' is without value.",M(r[n]));if(r[n][3]===void 0&&!t.allowBooleanAttributes)return E("InvalidAttr","boolean attribute '"+r[n][2]+"' is not allowed.",M(r[n]));let s=r[n][2];if(!$t(s))return E("InvalidAttr","Attribute '"+s+"' is an invalid name.",M(r[n]));if(!i.hasOwnProperty(s))i[s]=1;else return E("InvalidAttr","Attribute '"+s+"' is repeated.",M(r[n]))}return!0}function Bt(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function kt(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,Bt(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function E(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function $t(e){return z.isName(e)}function Rt(e){return z.isName(e)}function b(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function M(e){return e.startIndex+e[1].length}});var me=T(Q=>{var Ae={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}},Ut=function(e){return Object.assign({},Ae,e)};Q.buildOptions=Ut;Q.defaultOptions=Ae});var Ie=T((sn,xe)=>{"use strict";var K=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}};xe.exports=K});var Oe=T((on,Pe)=>{var Xt=q();function Mt(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let i=1,n=!1,s=!1,l="";for(;t<e.length;t++)if(e[t]==="<"&&!s){if(n&&Yt(e,t)){t+=7;let a,o;[a,o,t]=Gt(e,t+1),o.indexOf("&")===-1&&(r[zt(a)]={regx:RegExp(`&${a};`,"g"),val:o})}else if(n&&Wt(e,t))t+=8;else if(n&&Ht(e,t))t+=8;else if(n&&Zt(e,t))t+=9;else if(qt)s=!0;else throw new Error("Invalid DOCTYPE");i++,l=""}else if(e[t]===">"){if(s?e[t-1]==="-"&&e[t-2]==="-"&&(s=!1,i--):i--,i===0)break}else e[t]==="["?n=!0:l+=e[t];if(i!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function Gt(e,t){let r="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)r+=e[t];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");let i=e[t++],n="";for(;t<e.length&&e[t]!==i;t++)n+=e[t];return[r,n,t]}function qt(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function Yt(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function Wt(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function Ht(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function Zt(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function zt(e){if(Xt.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}Pe.exports=Mt});var ve=T((an,Ce)=>{var Jt=/^[-+]?0x[a-fA-F0-9]+$/,Qt=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,Kt={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function jt(e,t={}){if(t=Object.assign({},Kt,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(e==="0")return 0;if(t.hex&&Jt.test(r))return er(r,16);if(r.search(/[eE]/)!==-1){let i=r.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(i){if(t.leadingZeros)r=(i[1]||"")+i[3];else if(!(i[2]==="0"&&i[3][0]==="."))return e;return t.eNotation?Number(r):e}else return e}else{let i=Qt.exec(r);if(i){let n=i[1],s=i[2],l=Dt(i[3]);if(!t.leadingZeros&&s.length>0&&n&&r[2]!==".")return e;if(!t.leadingZeros&&s.length>0&&!n&&r[1]!==".")return e;if(t.leadingZeros&&s===e)return 0;{let a=Number(r),o=""+a;return o.search(/[eE]/)!==-1?t.eNotation?a:e:r.indexOf(".")!==-1?o==="0"&&l===""||o===l||n&&o==="-"+l?a:e:s?l===o||n+l===o?a:e:r===o||r===n+o?a:e}}else return e}}function Dt(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}function er(e,t){if(parseInt)return parseInt(e,t);if(Number.parseInt)return Number.parseInt(e,t);if(window&&window.parseInt)return window.parseInt(e,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}Ce.exports=jt});var j=T((ln,Fe)=>{function tr(e){return typeof e=="function"?e:Array.isArray(e)?t=>{for(let r of e)if(typeof r=="string"&&t===r||r instanceof RegExp&&r.test(t))return!0}:()=>!1}Fe.exports=tr});var Se=T((fn,Le)=>{"use strict";var _e=q(),G=Ie(),rr=Oe(),nr=ve(),sr=j(),D=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(r,i)=>String.fromCharCode(Number.parseInt(i,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(r,i)=>String.fromCharCode(Number.parseInt(i,16))}},this.addExternalEntities=ir,this.parseXml=cr,this.parseTextData=or,this.resolveNameSpace=ar,this.buildAttributesMap=fr,this.isItStopNode=gr,this.replaceEntitiesValue=hr,this.readStopNodeData=Nr,this.saveTextToParentTag=dr,this.addChild=ur,this.ignoreAttributesFn=sr(this.options.ignoreAttributes)}};function ir(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let i=t[r];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:e[i]}}}function or(e,t,r,i,n,s,l){if(e!==void 0&&(this.options.trimValues&&!i&&(e=e.trim()),e.length>0)){l||(e=this.replaceEntitiesValue(e));let a=this.options.tagValueProcessor(t,e,r,n,s);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?te(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?te(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function ar(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}var lr=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function fr(e,t,r){if(this.options.ignoreAttributes!==!0&&typeof e=="string"){let i=_e.getAllMatches(e,lr),n=i.length,s={};for(let l=0;l<n;l++){let a=this.resolveNameSpace(i[l][1]);if(this.ignoreAttributesFn(a,t))continue;let o=i[l][4],u=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(u=this.options.transformAttributeName(u)),u==="__proto__"&&(u="#__proto__"),o!==void 0){this.options.trimValues&&(o=o.trim()),o=this.replaceEntitiesValue(o);let c=this.options.attributeValueProcessor(a,o,t);c==null?s[u]=o:typeof c!=typeof o||c!==o?s[u]=c:s[u]=te(o,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[u]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){let l={};return l[this.options.attributesGroupName]=s,l}return s}}var cr=function(e){e=e.replace(/\r\n?/g,`
`);let t=new G("!xml"),r=t,i="",n="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){let a=$(e,">",s,"Closing Tag is not closed."),o=e.substring(s+2,a).trim();if(this.options.removeNSPrefix){let f=o.indexOf(":");f!==-1&&(o=o.substr(f+1))}this.options.transformTagName&&(o=this.options.transformTagName(o)),r&&(i=this.saveTextToParentTag(i,r,n));let u=n.substring(n.lastIndexOf(".")+1);if(o&&this.options.unpairedTags.indexOf(o)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${o}>`);let c=0;u&&this.options.unpairedTags.indexOf(u)!==-1?(c=n.lastIndexOf(".",n.lastIndexOf(".")-1),this.tagsNodeStack.pop()):c=n.lastIndexOf("."),n=n.substring(0,c),r=this.tagsNodeStack.pop(),i="",s=a}else if(e[s+1]==="?"){let a=ee(e,s,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,r,n),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let o=new G(a.tagName);o.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(o[":@"]=this.buildAttributesMap(a.tagExp,n,a.tagName)),this.addChild(r,o,n)}s=a.closeIndex+1}else if(e.substr(s+1,3)==="!--"){let a=$(e,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){let o=e.substring(s+4,a-2);i=this.saveTextToParentTag(i,r,n),r.add(this.options.commentPropName,[{[this.options.textNodeName]:o}])}s=a}else if(e.substr(s+1,2)==="!D"){let a=rr(e,s);this.docTypeEntities=a.entities,s=a.i}else if(e.substr(s+1,2)==="!["){let a=$(e,"]]>",s,"CDATA is not closed.")-2,o=e.substring(s+9,a);i=this.saveTextToParentTag(i,r,n);let u=this.parseTextData(o,r.tagname,n,!0,!1,!0,!0);u==null&&(u=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:o}]):r.add(this.options.textNodeName,u),s=a+2}else{let a=ee(e,s,this.options.removeNSPrefix),o=a.tagName,u=a.rawTagName,c=a.tagExp,f=a.attrExpPresent,p=a.closeIndex;this.options.transformTagName&&(o=this.options.transformTagName(o)),r&&i&&r.tagname!=="!xml"&&(i=this.saveTextToParentTag(i,r,n,!1));let w=r;if(w&&this.options.unpairedTags.indexOf(w.tagname)!==-1&&(r=this.tagsNodeStack.pop(),n=n.substring(0,n.lastIndexOf("."))),o!==t.tagname&&(n+=n?"."+o:o),this.isItStopNode(this.options.stopNodes,n,o)){let h="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)o[o.length-1]==="/"?(o=o.substr(0,o.length-1),n=n.substr(0,n.length-1),c=o):c=c.substr(0,c.length-1),s=a.closeIndex;else if(this.options.unpairedTags.indexOf(o)!==-1)s=a.closeIndex;else{let P=this.readStopNodeData(e,u,p+1);if(!P)throw new Error(`Unexpected end of ${u}`);s=P.i,h=P.tagContent}let B=new G(o);o!==c&&f&&(B[":@"]=this.buildAttributesMap(c,n,o)),h&&(h=this.parseTextData(h,o,n,!0,f,!0,!0)),n=n.substr(0,n.lastIndexOf(".")),B.add(this.options.textNodeName,h),this.addChild(r,B,n)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){o[o.length-1]==="/"?(o=o.substr(0,o.length-1),n=n.substr(0,n.length-1),c=o):c=c.substr(0,c.length-1),this.options.transformTagName&&(o=this.options.transformTagName(o));let h=new G(o);o!==c&&f&&(h[":@"]=this.buildAttributesMap(c,n,o)),this.addChild(r,h,n),n=n.substr(0,n.lastIndexOf("."))}else{let h=new G(o);this.tagsNodeStack.push(r),o!==c&&f&&(h[":@"]=this.buildAttributesMap(c,n,o)),this.addChild(r,h,n),r=h}i="",s=p}}else i+=e[s];return t.child};function ur(e,t,r){let i=this.options.updateTag(t.tagname,r,t[":@"]);i===!1||(typeof i=="string"&&(t.tagname=i),e.addChild(t))}var hr=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function dr(e,t,r,i){return e&&(i===void 0&&(i=t.child.length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,i),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function gr(e,t,r){let i="*."+r;for(let n in e){let s=e[n];if(i===s||t===s)return!0}return!1}function pr(e,t,r=">"){let i,n="";for(let s=t;s<e.length;s++){let l=e[s];if(i)l===i&&(i="");else if(l==='"'||l==="'")i=l;else if(l===r[0])if(r[1]){if(e[s+1]===r[1])return{data:n,index:s}}else return{data:n,index:s};else l==="	"&&(l=" ");n+=l}}function $(e,t,r,i){let n=e.indexOf(t,r);if(n===-1)throw new Error(i);return n+t.length-1}function ee(e,t,r,i=">"){let n=pr(e,t+1,i);if(!n)return;let s=n.data,l=n.index,a=s.search(/\s/),o=s,u=!0;a!==-1&&(o=s.substring(0,a),s=s.substring(a+1).trimStart());let c=o;if(r){let f=o.indexOf(":");f!==-1&&(o=o.substr(f+1),u=o!==n.data.substr(f+1))}return{tagName:o,tagExp:s,closeIndex:l,attrExpPresent:u,rawTagName:c}}function Nr(e,t,r){let i=r,n=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let s=$(e,">",r,`${t} is not closed`);if(e.substring(r+2,s).trim()===t&&(n--,n===0))return{tagContent:e.substring(i,r),i:s};r=s}else if(e[r+1]==="?")r=$(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=$(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=$(e,"]]>",r,"StopNode is not closed.")-2;else{let s=ee(e,r,">");s&&((s&&s.tagName)===t&&s.tagExp[s.tagExp.length-1]!=="/"&&n++,r=s.closeIndex)}}function te(e,t,r){if(t&&typeof e=="string"){let i=e.trim();return i==="true"?!0:i==="false"?!1:nr(e,r)}else return _e.isExist(e)?e:""}Le.exports=D});var ke=T(Be=>{"use strict";function Er(e,t){return Ve(e,t)}function Ve(e,t,r){let i,n={};for(let s=0;s<e.length;s++){let l=e[s],a=wr(l),o="";if(r===void 0?o=a:o=r+"."+a,a===t.textNodeName)i===void 0?i=l[a]:i+=""+l[a];else{if(a===void 0)continue;if(l[a]){let u=Ve(l[a],t,o),c=yr(u,t);l[":@"]?br(u,l[":@"],o,t):Object.keys(u).length===1&&u[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?u=u[t.textNodeName]:Object.keys(u).length===0&&(t.alwaysCreateTextNode?u[t.textNodeName]="":u=""),n[a]!==void 0&&n.hasOwnProperty(a)?(Array.isArray(n[a])||(n[a]=[n[a]]),n[a].push(u)):t.isArray(a,o,c)?n[a]=[u]:n[a]=u}}}return typeof i=="string"?i.length>0&&(n[t.textNodeName]=i):i!==void 0&&(n[t.textNodeName]=i),n}function wr(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let i=t[r];if(i!==":@")return i}}function br(e,t,r,i){if(t){let n=Object.keys(t),s=n.length;for(let l=0;l<s;l++){let a=n[l];i.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function yr(e,t){let{textNodeName:r}=t,i=Object.keys(e).length;return!!(i===0||i===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}Be.prettify=Er});var Re=T((un,$e)=>{var{buildOptions:Tr}=me(),Ar=Se(),{prettify:mr}=ke(),xr=J(),re=class{constructor(t){this.externalEntities={},this.options=Tr(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let s=xr.validate(t,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}let i=new Ar(this.options);i.addExternalEntities(this.externalEntities);let n=i.parseXml(t);return this.options.preserveOrder||n===void 0?n:mr(n,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};$e.exports=re});var qe=T((hn,Ge)=>{function Ir(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=`
`),Xe(e,t,"",r)}function Xe(e,t,r,i){let n="",s=!1;for(let l=0;l<e.length;l++){let a=e[l],o=Pr(a);if(o===void 0)continue;let u="";if(r.length===0?u=o:u=`${r}.${o}`,o===t.textNodeName){let h=a[o];Or(u,t)||(h=t.tagValueProcessor(o,h),h=Me(h,t)),s&&(n+=i),n+=h,s=!1;continue}else if(o===t.cdataPropName){s&&(n+=i),n+=`<![CDATA[${a[o][0][t.textNodeName]}]]>`,s=!1;continue}else if(o===t.commentPropName){n+=i+`<!--${a[o][0][t.textNodeName]}-->`,s=!0;continue}else if(o[0]==="?"){let h=Ue(a[":@"],t),B=o==="?xml"?"":i,P=a[o][0][t.textNodeName];P=P.length!==0?" "+P:"",n+=B+`<${o}${P}${h}?>`,s=!0;continue}let c=i;c!==""&&(c+=t.indentBy);let f=Ue(a[":@"],t),p=i+`<${o}${f}`,w=Xe(a[o],t,u,c);t.unpairedTags.indexOf(o)!==-1?t.suppressUnpairedNode?n+=p+">":n+=p+"/>":(!w||w.length===0)&&t.suppressEmptyNode?n+=p+"/>":w&&w.endsWith(">")?n+=p+`>${w}${i}</${o}>`:(n+=p+">",w&&i!==""&&(w.includes("/>")||w.includes("</"))?n+=i+t.indentBy+w+i:n+=w,n+=`</${o}>`),s=!0}return n}function Pr(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let i=t[r];if(e.hasOwnProperty(i)&&i!==":@")return i}}function Ue(e,t){let r="";if(e&&!t.ignoreAttributes)for(let i in e){if(!e.hasOwnProperty(i))continue;let n=t.attributeValueProcessor(i,e[i]);n=Me(n,t),n===!0&&t.suppressBooleanAttributes?r+=` ${i.substr(t.attributeNamePrefix.length)}`:r+=` ${i.substr(t.attributeNamePrefix.length)}="${n}"`}return r}function Or(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let i in t.stopNodes)if(t.stopNodes[i]===e||t.stopNodes[i]==="*."+r)return!0;return!1}function Me(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){let i=t.entities[r];e=e.replace(i.regex,i.val)}return e}Ge.exports=Ir});var We=T((dn,Ye)=>{"use strict";var Cr=qe(),vr=j(),Fr={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function V(e){this.options=Object.assign({},Fr,e),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=vr(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Sr),this.processTextOrObjNode=_r,this.options.format?(this.indentate=Lr,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}V.prototype.build=function(e){return this.options.preserveOrder?Cr(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0,[]).val)};V.prototype.j2x=function(e,t,r){let i="",n="",s=r.join(".");for(let l in e)if(Object.prototype.hasOwnProperty.call(e,l))if(typeof e[l]>"u")this.isAttribute(l)&&(n+="");else if(e[l]===null)this.isAttribute(l)||l===this.options.cdataPropName?n+="":l[0]==="?"?n+=this.indentate(t)+"<"+l+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+l+"/"+this.tagEndChar;else if(e[l]instanceof Date)n+=this.buildTextValNode(e[l],l,"",t);else if(typeof e[l]!="object"){let a=this.isAttribute(l);if(a&&!this.ignoreAttributesFn(a,s))i+=this.buildAttrPairStr(a,""+e[l]);else if(!a)if(l===this.options.textNodeName){let o=this.options.tagValueProcessor(l,""+e[l]);n+=this.replaceEntitiesValue(o)}else n+=this.buildTextValNode(e[l],l,"",t)}else if(Array.isArray(e[l])){let a=e[l].length,o="",u="";for(let c=0;c<a;c++){let f=e[l][c];if(!(typeof f>"u"))if(f===null)l[0]==="?"?n+=this.indentate(t)+"<"+l+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+l+"/"+this.tagEndChar;else if(typeof f=="object")if(this.options.oneListGroup){let p=this.j2x(f,t+1,r.concat(l));o+=p.val,this.options.attributesGroupName&&f.hasOwnProperty(this.options.attributesGroupName)&&(u+=p.attrStr)}else o+=this.processTextOrObjNode(f,l,t,r);else if(this.options.oneListGroup){let p=this.options.tagValueProcessor(l,f);p=this.replaceEntitiesValue(p),o+=p}else o+=this.buildTextValNode(f,l,"",t)}this.options.oneListGroup&&(o=this.buildObjectNode(o,l,u,t)),n+=o}else if(this.options.attributesGroupName&&l===this.options.attributesGroupName){let a=Object.keys(e[l]),o=a.length;for(let u=0;u<o;u++)i+=this.buildAttrPairStr(a[u],""+e[l][a[u]])}else n+=this.processTextOrObjNode(e[l],l,t,r);return{attrStr:i,val:n}};V.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function _r(e,t,r,i){let n=this.j2x(e,r+1,i.concat(t));return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}V.prototype.buildObjectNode=function(e,t,r,i){if(e==="")return t[0]==="?"?this.indentate(i)+"<"+t+r+"?"+this.tagEndChar:this.indentate(i)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let n="</"+t+this.tagEndChar,s="";return t[0]==="?"&&(s="?",n=""),(r||r==="")&&e.indexOf("<")===-1?this.indentate(i)+"<"+t+r+s+">"+e+n:this.options.commentPropName!==!1&&t===this.options.commentPropName&&s.length===0?this.indentate(i)+`<!--${e}-->`+this.newLine:this.indentate(i)+"<"+t+r+s+this.tagEndChar+e+this.indentate(i)+n}};V.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};V.prototype.buildTextValNode=function(e,t,r,i){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(i)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(i)+"<"+t+r+"?"+this.tagEndChar;{let n=this.options.tagValueProcessor(t,e);return n=this.replaceEntitiesValue(n),n===""?this.indentate(i)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(i)+"<"+t+r+">"+n+"</"+t+this.tagEndChar}};V.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function Lr(e){return this.options.indentBy.repeat(e)}function Sr(e){return e.startsWith(this.options.attributeNamePrefix)&&e!==this.options.textNodeName?e.substr(this.attrPrefixLen):!1}Ye.exports=V});var Ze=T((gn,He)=>{"use strict";var Vr=J(),Br=Re(),kr=We();He.exports={XMLParser:Br,XMLValidator:Vr,XMLBuilder:kr}});var Qe=T(Y=>{"use strict";Y.byteLength=Rr;Y.toByteArray=Xr;Y.fromByteArray=qr;var v=[],I=[],$r=typeof Uint8Array<"u"?Uint8Array:Array,ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(R=0,ze=ne.length;R<ze;++R)v[R]=ne[R],I[ne.charCodeAt(R)]=R;var R,ze;I[45]=62;I[95]=63;function Je(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var i=r===t?0:4-r%4;return[r,i]}function Rr(e){var t=Je(e),r=t[0],i=t[1];return(r+i)*3/4-i}function Ur(e,t,r){return(t+r)*3/4-r}function Xr(e){var t,r=Je(e),i=r[0],n=r[1],s=new $r(Ur(e,i,n)),l=0,a=n>0?i-4:i,o;for(o=0;o<a;o+=4)t=I[e.charCodeAt(o)]<<18|I[e.charCodeAt(o+1)]<<12|I[e.charCodeAt(o+2)]<<6|I[e.charCodeAt(o+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=t&255;return n===2&&(t=I[e.charCodeAt(o)]<<2|I[e.charCodeAt(o+1)]>>4,s[l++]=t&255),n===1&&(t=I[e.charCodeAt(o)]<<10|I[e.charCodeAt(o+1)]<<4|I[e.charCodeAt(o+2)]>>2,s[l++]=t>>8&255,s[l++]=t&255),s}function Mr(e){return v[e>>18&63]+v[e>>12&63]+v[e>>6&63]+v[e&63]}function Gr(e,t,r){for(var i,n=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),n.push(Mr(i));return n.join("")}function qr(e){for(var t,r=e.length,i=r%3,n=[],s=16383,l=0,a=r-i;l<a;l+=s)n.push(Gr(e,l,l+s>a?a:l+s));return i===1?(t=e[r-1],n.push(v[t>>2]+v[t<<4&63]+"==")):i===2&&(t=(e[r-2]<<8)+e[r-1],n.push(v[t>>10]+v[t>>4&63]+v[t<<2&63]+"=")),n.join("")}});var S="bplist00",ce="// !$*UTF8*$!",C;(function(e){e[e.BINARY=0]="BINARY",e[e.XML=1]="XML",e[e.OPENSTEP=2]="OPENSTEP"})(C||(C={}));var x=100*1e3*1e3,Nt=32768,ue=new TextDecoder("utf-8"),Et=new TextDecoder("utf-16");function he(e,t=0){return new DataView(e).getFloat64(t,!1)}function wt(e,t=0){return new DataView(e).getFloat32(t,!1)}function k(e,t=0){return new DataView(e).getUint8(t)}function bt(e,t=0){return new DataView(e).getUint16(t,!1)}function yt(e,t=0){return new DataView(e).getUint32(t,!1)}function X(e,t=0){return new DataView(e).getBigUint64(t,!1)}function _(e){switch(e.byteLength){case 1:return k(e);case 2:return bt(e);case 4:return yt(e);case 8:return X(e);case 16:return X(e,8)}throw new Error(`Invalid unsigned int length: ${e.byteLength}`)}function de(e,t=0){return new DataView(e).getInt8(t)}function Tt(e,t=0){return new DataView(e).getInt16(t,!1)}function At(e,t=0){return new DataView(e).getInt32(t,!1)}function mt(e,t=0){return new DataView(e).getBigInt64(t,!1)}function xt(e){switch(e.byteLength){case 1:return de(e);case 2:return Tt(e);case 4:return At(e);case 8:return mt(e);case 16:return X(e,8)}throw new Error(`Invalid int length: ${e.byteLength}`)}function It(e){let t=new Uint8Array(e);for(let r=0;r<t.length;r+=2){let i=t[r];t[r]=t[r+1],t[r+1]=i}return t.buffer}var ge=e=>{let t=e.slice(0,S.length);if(ue.decode(t)!==S)throw new Error(`Invalid binary plist. Expected '${S}' at offset 0.`);let r=e.slice(e.byteLength-32,e.byteLength),i=k(r,6),n=k(r,7),s=Number(X(r,8)),l=Number(X(r,16)),a=Number(X(r,24));if(s>Nt)throw new Error("maxObjectCount exceeded");let o=[];for(let c=0;c<s;c++){let f=e.slice(a+c*i,a+(c+1)*i);o[c]=Number(_(f))}function u(c){let f=o[c],p=k(e,f),w=(p&240)>>4,h=p&15;switch(w){case 0:return B();case 1:return P();case 8:return rt();case 2:return nt();case 3:return st();case 4:return it();case 5:return ae();case 6:return ae(!0);case 10:return ot();case 13:return at();default:throw new Error("Unhandled type 0x"+w.toString(16))}function B(){switch(h){case 0:return null;case 8:return!1;case 9:return!0;case 15:return null;default:throw new Error("Unhandled simple type 0x"+w.toString(16))}}function P(){let d=Math.pow(2,h);if(d<x){let N=e.slice(f+1,f+1+d);return xt(N)}throw new Error("Too little heap space available! Wanted to read "+d+" bytes, but only "+x+" are available.")}function rt(){let d=h+1;if(d<x)return{CF$UID:_(e.slice(f+1,f+1+d))};throw new Error("Too little heap space available! Wanted to read "+d+" bytes, but only "+x+" are available.")}function nt(){let d=Math.pow(2,h);if(d<x){let N=e.slice(f+1,f+1+d);if(d===4)return wt(N);if(d===8)return he(N);throw new Error(`Invalid real length: ${d}`)}else throw new Error("Too little heap space available! Wanted to read "+d+" bytes, but only "+x+" are available.")}function st(){h!=3&&console.error("Unknown date type :"+h+". Parsing anyway...");let d=e.slice(f+1,f+9);return new Date(9783072e5+1e3*he(d))}function it(){let d=1,N=h;if(h==15){let A=de(e,f+1),g=(A&240)/16;g!=1&&console.error("0x4: UNEXPECTED LENGTH-INT TYPE! "+g);let y=A&15,O=Math.pow(2,y);d=2+O,N=Number(_(e.slice(f+2,f+2+O)))}if(N<x)return e.slice(f+d,f+d+Number(N));throw new Error("Too little heap space available! Wanted to read "+N+" bytes, but only "+x+" are available.")}function ae(d=!1){let N=h,A=1;if(h==15){let g=k(e,f+1),y=(g&240)/16;y!=1&&console.error("UNEXPECTED LENGTH-INT TYPE! "+y);let O=g&15,m=Math.pow(2,O);A=2+m,N=Number(_(e.slice(f+2,f+2+m)))}if(N*=d?2:1,N<x){let g=e.slice(f+A,f+A+N);return d?(g=It(g),Et.decode(g)):ue.decode(g)}throw new Error("Too little heap space available! Wanted to read "+N+" bytes, but only "+x+" are available.")}function ot(){let d=h,N=1;if(h==15){let g=k(e,f+1),y=(g&240)/16;y!=1&&console.error("0xa: UNEXPECTED LENGTH-INT TYPE! "+y);let O=g&15,m=Math.pow(2,O);N=2+m,d=Number(_(e.slice(f+2,f+2+m)))}if(d*n>x)throw new Error("Too little heap space available!");let A=[];for(let g=0;g<d;g++){let y=Number(_(e.slice(f+N+g*n,f+N+(g+1)*n)));A[g]=u(y)}return A}function at(){let d=h,N=1;if(h==15){let g=k(e,f+1),y=(g&240)/16;y!=1&&console.error("0xD: UNEXPECTED LENGTH-INT TYPE! "+y);let O=g&15,m=Math.pow(2,O);N=2+m,d=Number(_(e.slice(f+2,f+2+m)))}if(d*2*n>x)throw new Error("Too little heap space available!");let A={};for(let g=0;g<d;g++){let y=Number(_(e.slice(f+N+g*n,f+N+(g+1)*n))),O=Number(_(e.slice(f+N+d*n+g*n,f+N+d*n+(g+1)*n))),m=u(y);if(typeof m!="string")throw new Error("Invalid key type.");if(m==="__proto__")throw new Error("Attempted prototype pollution");let lt=u(O);A[m]=lt}return A}}return u(l)};var Ke=fe(Ze(),1),je=fe(Qe(),1),Yr=new Ke.XMLParser({preserveOrder:!0,ignoreDeclaration:!0,ignorePiTags:!0,parseTagValue:!1,cdataPropName:"#cdata"}),W=e=>typeof e>"u"||e===null||e==="",se=e=>{let t=Object.keys(e);if(t.length!==1)throw new Error("An object must only contain a tag name and no properties.");let r=t[0],i=e[r]?.[0]?.["#text"];switch(r){case"dict":let n=e[r]?.length;if(n===0)return{};if(n>1&&n%2===1)throw new Error("Invalid dictionary.");let s={};for(let a=0;a<n;a+=2){let o=e[r][a],u=e[r][a+1];if(!o.hasOwnProperty("key"))throw new Error("Expected <key>");if(!u)throw new Error("Value missing for key inside <dict>");let c=o?.key?.[0]?.["#text"]||"";if(c==="__proto__")throw new Error("Attempted prototype pollution.");s[c]=se(u)}return s;case"array":return e[r]?.map(se);case"string":let l=e[r];return l.length===0?"":l.reduce((a,o)=>(o.hasOwnProperty("#cdata")&&(a+=o["#cdata"].reduce((u,c)=>u+c["#text"],"")),o.hasOwnProperty("#text")&&(a+=o["#text"]),a),"");case"integer":if(W(i))throw new Error("Encountered empty <integer>");return i>Number.MAX_SAFE_INTEGER?BigInt(i):parseInt(i);case"real":if(W(i))throw new Error("Encountered empty <real>");return parseFloat(i);case"data":return W(i)?new Uint8Array([]).buffer:(0,je.toByteArray)(i.replace(/[\s\r\n\t]*/g,"")).buffer;case"date":if(W(i))throw new Error("Encountered empty <date>");return new Date(i);case"true":return!0;case"false":return!1}throw new Error("Invalid type.")},ie=e=>{let t=Yr.parse(e);if(!Array.isArray(t))throw new Error("Invalid XML.");let r=t.filter(n=>n.hasOwnProperty("plist"));if(r.length!==1)throw new Error("The document must contain exactly one plist tag.");let i=r[0].plist;if(!Array.isArray(i))throw new Error("plist tag must contain objects.");if(i.length!==1)throw new Error("plist tag must contain exactly one object.");return se(i[0])};var De=/[A-Za-z0-9_$+\/:.-]/,Wr=/[A-Fa-f0-9]/,et=[" ","	",`
`,"\r"],Hr=e=>JSON.parse(`"${e}"`),F=(e,t,r=!1)=>{if([,e]=U(e),!e.startsWith(t)){if(r)return[null,e];throw new Error(`Expected '${t}'`)}return e=e.substring(t.length),[,e]=U(e),[t,e]},U=e=>{let t;for(;e.length>0;){if(t)if(e.startsWith(t))e=e.substring(t.length),t=void 0;else{e=e.substring(1);continue}let r=e.substring(0,1);if(e=e.substring(1),!et.includes(r))switch(r){case"/":switch(e.charAt(0)){case"*":t="*/";break;case"/":t=`
`;break;default:throw new Error("Unexpected '/'")}break;default:return[null,r+e]}}return[null,e]},H=e=>{if([,e]=U(e),e.length===0)return[null,""];let t=null,r=e.substring(0,1);switch(e=e.substring(1),r){case"{":if(t={},[,e]=U(e),e.charAt(0)==="}"){[,e]=F(e,"}");break}for(;e.charAt(0)!=="}";){let n,s;if([n,e]=H(e),typeof n!="string")throw new Error("Expected string key");if(n==="__proto__")throw new Error("Attempted prototype pollution");if([,e]=F(e,"="),[s,e]=H(e),t[n]=s,[,e]=F(e,";"),e.length===0)throw new Error("No matching '}' found")}[,e]=F(e,"}");break;case"(":if(t=[],[,e]=U(e),e.charAt(0)===")"){[,e]=F(e,")");break}for(;e.charAt(0)!==")";){let n,s;if([n,e]=H(e),t.push(n),[s,e]=F(e,",",!0),!s)break;if(e.length===0)throw new Error("No matching ')' found")}[,e]=F(e,")");break;case"<":let i="";if([,e]=U(e),e.charAt(0)===">"){[,e]=F(e,">");break}for(;e.charAt(0)!==">";){let n=e.charAt(0);if(e=e.substring(1),Wr.test(n))i+=n;else{if(et.includes(n))continue;throw new Error(`Unexpected '${n}'`)}if(e.length===0)throw new Error("No matching '>' found")}if(i.length>0){if(i.length%2===1)throw new Error("Data must contain hex digits grouped in pairs");let n=i.match(/../g);n!==null&&(t=new Uint8Array(n.map(s=>parseInt(s,16))).buffer)}[,e]=F(e,">");break;case'"':case"'":for(t="";e.charAt(0)!==r;)if(t+=e.charAt(0),e.charAt(0)==="\\"?(t+=e.charAt(1),e=e.substring(2)):e=e.substring(1),e.length===0)throw new Error(`No matching ${r} found`);t=Hr(t),[,e]=F(e,r);break;default:if(!De.test(r))throw new Error(`Unexpected '${r}'`);for(t=r;De.test(e.charAt(0))&&(t+=e.charAt(0),e=e.substring(1),e.length!==0););}return[,e]=U(e),[t,e]},oe=e=>{let[t,r]=H(e);if(r.length>0)throw new Error("Unexpected content at the end of file");if(typeof t>"u")throw new Error("Parsing failed");return t};var Zr=/^[\u0000-\u007f]*$/,Z=new TextDecoder("utf-8"),tt=e=>{if(typeof e=="string"){if(e.startsWith(S))return C.BINARY;let t=e.substring(0,16).replace(/[\s\t\n\r]+/g,"");if(t.startsWith("<?xml")||t.startsWith("<plist"))return C.XML;if(e.trimStart().startsWith(ce)||Zr.test(t))return C.OPENSTEP;throw new Error("Unknown format")}else{let t=e.slice(0,S.length);return Z.decode(t)===S?C.BINARY:tt(Z.decode(e.slice(0,16)))}},An=e=>{switch(tt(e)){case C.BINARY:if(typeof e=="string")throw new Error("Binary plists must be passed as ArrayBuffer");return ge(e);case C.XML:return e instanceof ArrayBuffer?ie(Z.decode(e)):ie(e);case C.OPENSTEP:return e instanceof ArrayBuffer?oe(Z.decode(e)):oe(e)}throw new Error("Unsupported format")};export{tt as detectFormat,An as parse};
